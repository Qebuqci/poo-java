:imagesdir: images

== Criando Classes no BlueJ

Objetos só podem ser criados se existirem classes para serem utilizadas como modelos. A linguagem Java possui uma infinidade de classes para as mais diversas finalidades. No entanto, ao criar um software para resolver um determinado problema, você precisará criar classes específicas do seu software. 

Cada classe precisa obrigatoriamente de um nome. Adicionalmente, ela pode ter características e/ou funcionalidades. Para iniciar, vamos criar uma classe contendo apenas características e ir evoluindo nossas classes ao longo do caminho, à medida que vamos introduzindo conceitos e regras.

Como primeiro exemplo, considere que o proprietário de uma loja de móveis e eletrodomésticos lhe pede para desenvolver um sistema para controle de vendas. O proprietário precisa inicialmente de um sistema para cadastrar *clientes*, *produtos*, *funcionários* e *filiais* da loja. 

A partir desta descrição, e sabendo que classes são normalmente representadsa utilizando-se substantivos, podemos identificar que os substantivos em negritos serão algumas das nossas classes. Para iniciarmos, abra o BlueJ e será apresentada a janela principal como na figura abaixo.

image::bluej-main-window.png[]

Ao iniciar o BlueJ você pode abrir ou criar um novo projeto. Vamos então criar um novo projeto acessando o menu "Projeto >> Novo Projeto". A tela abaixo aparece para darmos um nome e indicarmos onde desejamos salvar o projeto.

image::bluej-new-project.png[]

Após clicar em OK, a tela principal abre o projeto criado. O projeto inicia vazio.

image::bluej-empty-project.png[]

Do lado esquerdo temos apenas 3 botões, dos quais vamos focar em apenas 2 por enquanto.

- Nova Classe: para criar uma classe no projeto.
- Compilar: para compilar todas as classes do projeto.

Considerando as classes identificadas acima para o projeto da loja de móveis, vamos clicar no botão "Nova Classe" para criar a primeira classe que chamaremos de *Cliente*. A figura abaixo apresenta a janela para criação da classe. Basta preencher o campo "Nome da Classe" e clicar em OK sem alterar os outros campos. Explicar as opções desta tela está fora de contexto agora.

image::bluej-new-class.png[]

Por convenção, nomes de classes devem ter a inicial maiúscula e ser no singular. Se o nome da classe for composto, a inicial de cada palavra deve ser em maiúsculas. Não é permitido utilizar espaços e acentos devem ser evitados.

IMPORTANT: Apesar de Java permitir o uso de acentos em classes, nome de arquivos, variáveis e outros elementos, isto não é uma prática recomendável. Utilizar acentos para tais elementos pode fazer você obter um mal hábito que não é permitido em várias linguagens. Além disso, se você estiver trabalhando em um projeto envolvendo desenvolvedores de diversas partes do mundo, normalmente o código é escrito em inglês, que não possui acentos.

Após criar a classe, a tela do projeto deve ficar como a figura abaixo, mostrando a nova classe. Ao utilizar o BlueJ, o código Java para a classe criada é gerado automaticamente. No entanto, a classe é criada vazia, sem características nem funcionalidades. Desta forma, ela não tem utilidade alguma. 

image:bluej-class-cliente.png[]

=== Visualizando o código de uma classe

Para visualizar o código gerado para uma classe, devemos dar dois cliques sobre a classe desejada. A imagem abaixo apresenta o código da classe `Cliente` gerado pelo BlueJ. 

image:bluej-code-editor.png[]

Todo o código entre a primeira e última chave (linha 10 à linha 32) é apenas de demonstração. Ele não tem nenhuma utilidade para a classe `Cliente` que criamos e ainda inclui alguns detalhes que não serão abordados por enquanto. Ao criar qualquer classe no BlueJ, o mesmo código será criado para todas.
Assim, vamos apagar esse código entre as linhas 10 e 32 e deixar somente a estrutura básica de toda classe em Java.

O resultado final deve ser como apresentado na figura abaixo.

image:bluej-clean-class.png[]

O código da classe está entre as linhas 8 e 11, o texto nas linhas 2 a 7 são comentários utilizados como documentação da classe.
Você pode observar na linha 8 que a classe é definida pela palavra *class* seguida do nome que demos para a classe. As chaves nas linhas 9 e 11 são utilizadas para delimitar o início e fim do código da classe. Qualquer característica ou funcionalidade que desejarmos incluir na classe, precisam ser entre estas chaves.

=== Adicionando características a uma classe

Bem, agora que temos a estrutura da nossa primeira classe pronta, podemos começar a adicionar características nessa classe. Como já discutido no capítulo anterior, tais características dependem do finalidade do sistema ou ramo de atividade onde ele será utilizado. No caso do cliente da loja de móveis, algumas características que podemos identificar são: nome, CPF, sexo, email, endereço, cidade e telefone. Cada uma destas características nada mais são do que variáveis. Sabendo disso, precisamos então identificar o tipo de dado de cada uma delas. O email e endereço são claramente dados alfanuméricos (permitem letras e números). Em Java, `String` é o tipo que representa dados alfanuméricos. 

Por outro lado, nome e cidade são claramente dados alfabéticos (permitem somente letras). No entanto, as linguagens de programação convencionalmente não possuem dados que permitam armazenar apenas letras footnote:[Apesar das linguagens convencionais não permitirem que uma variável armazene somente letras, é muito simples criar programas que permitem ao usuário digitar apenas letras em um campo.]. Assim, utilizamos o tipo `String` para tal finalidade. 

.Atributos: as características de uma classe
[NOTE]
====
As características de uma classe são mais um dos princípios básicos de POO, chamadas de *atributos*, campos ou propriedades. Atributos é um termo que utilizamos no cotidiano. Por exemplo, uma pessoa pode ter como atributos o bom humor, paciência, beleza, estatura, etc. Assim, não é um termo específico da POO. Atributos nada mais são do que variáveis que possuem algumas características especiais que veremos ao longo do curso. Como toda variável, cada atributo precisa de um tipo e um nome. 
====

Dos atributos apresentados acima, o nome, CPF, email, endereço, cidade e telefone são alfanuméricos, logo do tipo `String`. No caso do sexo como ele pode ser representado por apenas uma letra, o tipo que permite armazenar no máximo uma letra é o `char`. Assim, podemos declarar tais atributos na classe `Cliente` como apresentado abaixo:

[source,java]
----
public class Cliente {
    String nome;
    String cpf;
    String email;
    String endereco;
    String cidade;
    String telefone;
    char sexo;
}
----

O código acima apresenta a forma mais básica de declaração de atributos. Este é o processo para declaração de variáveis em Java, seguindo o formato `tipo nomeDaVariavel;`.

Observe que o tipo `String` tem inicial maiúscula e o `char` minúscula. Tais tipos são realmente desta forma, não é um erro. Lembre-se que falamos anteiormente que classes por convenção tem inicial maiúscula. Logo, pode-se concluir que `String` nada mais é do que uma classe específica da linguagem Java, enquanto `char` é um tipo primitivo como você pode ter aprendido em aulas de algoritmos ou outra linguagem de programação.

TIP: Um tipo primitivo como `char` e `int` permitem declarar variáveis que possuem apenas dados. Uma classe como `String` possui dados (atributos) e funcionalidades. 

.Uso de chaves { }
[NOTE]
====
Em Java, chaves são utilizadas para delimitar um bloco de código, como um `if`, `for`, função, classe, etc. A chave pode ser aberta em uma linha separada, como:

[source,java]
----
public class Cliente 
{

}
----

ou na mesma linha que define o início de um bloco, como:

[source,java]
----
public class Cliente {
    
}
----

O formato definido pela Oracle nas http://www.oracle.com/technetwork/java/codeconventions-150003.pdf[Conveções de Código Java] é o último. Grandes empresas como https://google.github.io/styleguide/javaguide.html[Google] e https://github.com/twitter/commons/blob/master/src/java/com/twitter/common/styleguide.md[Twitter] também recomendam este padrão.

O local de abertura das chaves é uma grande discussão entre desenvolvedores. Há vantagens e desvantagens em relação à clareza do código dependendo de onde as chaves são colocadas. Os guias apresentados nos links acima abordam um pouco esta discussão, além de outros artigos como https://en.wikipedia.org/wiki/Indentation_style[este].
====

.Conveções ao declarar atributos
[NOTE]
====
Temos diversas variáveis do tipo `String`. Apesar de ser possível declará-las todas em uma única linha como:

[source,java]
----
String nome, cpf, email, endereco, cidade, telefone;
----

não é aconselhável fazer isto para atributos. Veremos posteriormente que atributos podem e devem ser documentados. Declarar vários atributos em uma mesma linha impedirá sua adequada documentação. Para variáveis convencionais (como variáveis locais dentro de funções), não há problema algum em fazer isso. Apesar de ser repetitivo declarar atributos de um mesmo tipo em linhas diferentes, isto favorece a documentação do projeto e torna a listagem de atributos mais clara e organizada. A forma apresentada é de fato o padrão utilizado na indústria de software orientado a objetos (OO).

Outro ponto importante é que o nome de atributos começam com inicial minúscula, intercalando maiúscula quando o nome for composto. Veja os exemplos abaixo:

[source,java]
----
String nome;
String cidadeNatal;
String cidadeResidencia;
----

Como falado anteriormente para classes e outros elementos da linguagem Java, não é recomendável utilizar acentos ao dar nomes a atributos.
====

TIP: https://en.wikipedia.org/wiki/Duplicate_code[Código duplicado] é um dos maiores problemas no desenvolvimento de software. Existem princípios como o https://en.wikipedia.org/wiki/Don't_repeat_yourself[Don't Repeat Yourself (DRY)] que pregam que você não deve ter retrabalho, ficar escrevendo o mesmo código várias vezes. Ao declarar um atributo em cada linha, repetindo o tipo para cada um, não estamos duplicando código referente à funcionalidades do sistema. Estamos apenas utilizando um determinado tipo várias vezes. Veremos que reutilização de código é um dos pilares da POO.

== Criando Objetos no BlueJ

Agora que temos nossa primeira classe criada no BlueJ, podemos fechar o editor de código e voltar para a tela inicial. Lembre-se que uma classe é um modelo a partir do qual podemos criar quantos objetos desejarmos. Para podermos criar objetos de uma classe, precisamos compilá-la primeiro. 

Logo, na tela inicial do projeto podemos clicar no botão *Compilar* no lado esquerdo.

image::bluej-compile.png[]

Clicando neste botão, todas as classes criadas serão compiladas. Observe que após clicar em *Compilar*, o interior da classe muda, indicando que ela foi compilada.

image::bluej-compiled-class.png[]

A partir de agora podemos então criar objetos a partir das classes compiladas, neste caso somente a classe Cliente. Outra vantagem do uso do BlueJ para aprendizagem de POO é que não precisamos escrever código para testar nossas classes: para criar objetos e interagir com eles. Podemos fazer isso tudo pela interface gráfica do BlueJ.

Depois da classe `Cliente` ter sido compilada, podemos clicar com o botão direito sobre ela e escolher a opção _new Cliente()_. Se a classe não estiver compilada, tal opção não aparecerá.

Em seguida aparecerá uma tela para informarmos o nome do objeto a ser criado. O BlueJ já sugere um nome para o objeto que podemos deixar como está.

image::bluej-new-object.png[]

Após clicar em OK o objeto criado aparece no canto inferior esquerdo da tela principal.

image::bluej-object-created.png[]

Agora já temos um objeto chamado `cliente1` que segue a mesma estrutura definida pela classe `Cliente`, assim como uma casa deve seguir o modelo definido pelo projeto de engenharia.

Podemos clicar com o botão direito sobre um objeto e escolher *Inspecionar*. Assim, podemos ver os atributos de tal objeto. Como não definimos valores para essses atributos ao criarmos o objeto, o conteúdo apresentado pode não fazer o menor sentido para você e apenas indica que os atributos não receberam nenhum dado ainda.

image::bluej-inspect-object.png[]

Com a imagem acima podemos rapidamente visualizar a estrutura dos objetos da classe `Cliente`. No entanto, para conseguirmos alterar os valores dos atributos, precisaremos escrever código para isto.

== Alterando os valores dos atributos

No mundo real, clientes de uma loja tem atributos em comum, como nome, CPF e telefone. No entanto, clientes distintos têm normalmente valores diferentes para cada um destes atributos. Por exemplo, o CPF de um cliente é diferente de outro. Diferentes pessoas podem ter o mesmo nome, mas normalmente têm nomes distintos. Assim, para que possamos definir os valores de cada um destes atributos da classe, precisamos criar funções para tal finalidade. Uma função é um bloco de código que é responsável por executar uma  tarefa específica. Uma função resolve um determinado problema. 

Imagine que você é diretor em uma empresa e precisa que sua secretária compre passagens áreas para você ir a uma reunião de negócios. A secretária então terá uma tarefa a ser executada: a compra das passagens. No entanto, para que ela consiga executar tal tarefa, você precisa passar algumas informações para ela, como a data que deseja viajar, cidade para onde vai e quantos dias pretende ficar em tal cidade. 

De posse de tais informações, a secretária pode então comprar as passagens aéreas e retornar ao chefe informando o horário da viagem, companhia aérea e mais informações que obteve.

=== Adicionando funcionalidades a uma classe

A habilidade de comprar passagens que a secretária possui é uma função. Uma função executa alguma tarefa, pode requerer alguns dados para poder executar e pode retornar alguma resposta a respeito do cumprimento de tal tarefa.

Em Java, funções tem essa mesma estrutura definida em três partes: 

- tipo de retorno;
- nome da função;
- parâmetros. 

Para o nosso objetivo de alterar os valores dos atributos de uma classe, podemos considerar a estrutura básica abaixo para criação de uma função:

[source,java]
----
TipoRetorno nomeFuncao(Tipo parametro1) {

}
----

O *TipoRetorno* indica se a função precisa retornar alguma resposta para quem solicitou a execução da tarefa e que tipo de dado terá tal resposta. Tal tipo pode ser qualquer tipo da linguagem Java, como `String` ou `int`. Caso a função não precise dar uma resposta (ou seja, ela tem apenas que executar uma tarefa mas não tem que responder para quem solicitou a execução de tal tarefa), a palavra `void` deve ser utilizada no lugar. `void` significa *nulo*, indicando que a função não retorna uma resposta.

O nome da função é definido de acordo com a finalidade da função. No caso do exemplo da secretária, a função poderia chamar `comprarPassagensAereas`.  No caso de a função necessitar que sejam passados quaisquer dados para que ela possa executar sua tarefa, tais dados precisam ser indicados dentro dos parênteses. Estes dados são chamados de *parâmetros* e são opcionais. O exemplo mostra a estrutura de uma função com 1 parâmetro.

Os parâmetros também são variáveis. Assim como os atributos, eles são chamados por um nome diferente pois funcionam de forma diferente, como será visto adiante.

TIP: Nomes de funções seguem o mesmo padrão de nomes de atributos: iniciam com minúsculas, intercalando maiúscula para cada palavra. Evite usar acentos.

O código de uma função em Java deve ser inserido dentro de uma classe. Uma função, da forma como utilizada em POO, não pode ser incluída dentro das chaves de outra função. Assim, a forma mais simples de incluir uma nova função é antes do fecha-chaves da classe (normalmente o último encontrado).

Para podermos criar a nossa primeira função para permitir alterar um atributo como o `endereco`, precisamos então definir qual o tipo de retorno, o nome da função e seus parâmetros. No caso de funções que alteram atributos, normalmente elas não dão nenhuma resposta, o que dizemos que elas não retornam nenhum valor. Ou seja, o tipo de retorno é `void`. 

Poderíamos chamar a função de `alteraEndereco`, mas para funções que alteram atributos, há uma convenção importantíssima de utilizar o formato `setNomeDoAtributo`. No caso do atributo `endereco`, a função deve chamar `setEndereco`. Tais funções devem ter apenas um parâmetro, que indica para a função qual é o dado que será armazenado no atributo quando a função for executada. Como os parâmetros são nada mais que variáveis, precisamos definir o tipo e nome de cada um. No caso das funções em questão, o tipo de nome pode ser exatamente os mesmos do atributo que será alterado pela função. Assim, nossa função para alterar o endereço de um cliente terá a seguinte estrutura:

[source,java]
----
void setEndereco(String endereco) {

}
----

A função precisará receber um endereço como parâmetro e armazenar tal endereço no atributo `endereco`, alterando assim o endereço do cliente. Para fazer, a função só precisa de uma linha de código, como mostrado abaixo:

[source,java]
----
void setEndereco(String endereco) {
    this.endereco = endereco;
}
----

A linha `this.endereco = endereco;` faz exatamente isto: copia o endereço recebido no parâmetro `endereco` e armazena o atributo `endereco` da classe. Como o parâmetro e o atributo tem o mesmo nome, para diferenciar o primeiro do segundo, utilizamos `this.endereco`. A palavra `this` significa "este" e representa o objeto para o qual o endereço estiver sendo alterado. 

Como alteramos a classe cliente, vamos compilar novamente e criar um novo objeto chamado `cliente1`, seguindo os mesmos passos indicados anteriormente. Clique com o botão direito sobre o `cliente1` criado na parte inferior do BlueJ. Você verá que a função `setEndereco` agora aparece na lista de opções. Desta forma, podemos executar a função, o que em programação dizemos *chamar uma função*.

image::bluej-method-call.png[]

O BlueJ indentifica que a função requer um parâmetro e nos solicita que digitemos um valor. Como o endereço é `String`, o valor precisa ser digitado entre aspas duplas, como exemplificado na figura abaixo.

image::bluej-method-parameters.png[]

Após clicarmos em OK, podemos clicar novamente com o botão direito sobre o `cliente1` e escolher *Inspecionar* e veremos que o atributo `endereco` do `cliente1` foi alterado para o valor que informamos para a função `setEndereco`.

image::bluej-object-changed.png[]

Quando clicamos no `cliente1` para alterar o endereço, `this` representa o objeto `cliente1`. Assim, `this.endereco` representa o atributo endereço do `cliente1`, enquanto somente `endereco` representa o parâmetro que possui o mesmo nome do atributo.

A animação abaixo mostra a relação entre tal parâmetro e o atributo `endereco` e como a função `setEndereco` funciona.

.Como o atributo `endereco` da classe `Cliente` funciona em conjunto com o parâmetro `endereco` da função `setEndereco`.
image::attributes-and-method-parameters.gif[]

Primeiramente, quando a função `setEndereco` é executada, ela receberá um endereço no parâmetro `endereco`.  A função então copia tal endereço para o atributo `endereco` na classe.

.Setters: mais um conceito de POO
[IMPORTANT]
****
Toda função que altera o valor de um atributo é chamada de *_setter_*. Ela é uma função como qualquer outra, mas tem essa finalidade específica. 

Qualquer atributo que precise ter seu valor alterado necessita de um *_setter_*. Você verá que criar tais funções é algo repetitivo e entediante. Por esse motivo, as ferramentas de desenvolvimento profissionais nos dispensam deste trabalho e permitem gerar *_setters_* para os atributos que desejarmos.

Este é um dos motivos para *_setter_* terem um padrão quanto ao nome, como apresentado anteriormente. *_Setter_* poderia significar "alterador, atribuidor".
****