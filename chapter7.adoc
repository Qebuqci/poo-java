:imagesdir: images

== Heran√ßa: uma das formas de reutiliza√ß√£o de c√≥digo

Quando introduzimos os conceitos de POO, uma das vantagens amplamente elogiadas deste
paradigma s√£o as diferentes maneiras de reutiliza√ß√£o de c√≥digo.
Em programa√ß√£o estruturada podemos reutilizar c√≥digo por meio de fun√ß√µes
e bibliotecas de fun√ß√µes. Em linguagens orientadas a objeto, al√©m destes meios, temos as classes
como estrutura fundamental
que garantem uma ampla reutiliza√ß√£o de c√≥digo. 
Uma vez que uma classe foi feita, ela pode ser utilizada em diversas partes
do sistema, inclusive em outros sistemas.

Continuando neste tema de reutiliza√ß√£o de c√≥digo, vamos relembrar as classes
`Cliente` e `Funcionario` que criamos no link:chapter4.adoc[Cap√≠tulo 4].
O c√≥digo delas foi colocado lado-a-lado logo abaixo para avaliarmos o quanto
de c√≥digo duplicado temos entre essas duas classes. 
Como podemos ver, temos 5 atributos (de `nome` a `sexo`) repetidos as duas classes.
Uma das coisas que temos abominado √© a duplica√ß√£o de c√≥digo, que leva √† degrada√ß√£o da qualidade de um projeto e em √∫ltimo caso ao chamado https://en.wikipedia.org/wiki/Software_rot[apodrecimento de software]. 

[source,java]
----
//private removido dos atributos por simplifica√ß√£o
public class Cliente {   public class Funcionario {
    String nome;            String nome;
    String cpf;             String cpf;
    String email;           String email;
    String telefone;        String telefone;
    char sexo;              char sexo;
    String endereco;        int matricula;
    String cidade;          String cargo;
}                        }
----

Voc√™ pode pensar que n√£o temos
de fato c√≥digo duplicado, mas apenas declara√ß√£o de atributos. No entanto, declara√ß√£o de vari√°veis tamb√©m √© c√≥digo. Tivemos trabalho dobrado ao declarar
tais atributos primeiro na classe `Cliente` e depois na `Funcionario`.
O pior de tudo √© que, m√©todos como _getters_, _setters_ e quaisquer outros m√©todos
como para valida√ß√£o de CPF precisariam ser inclu√≠dos duas vezes: uma vez para cada classe.
Tais m√©todos foram omitidos abaixo apenas por quest√µes pr√°ticas, para usar menos espa√ßo.
Nestes casos, se os m√©todos est√£o duplicados e voc√™ descobre que precisa fazer qualquer altera√ß√£o
em algum deles, precisar√° fazer tamb√©m na c√≥pia do mesmo m√©todo na outra classe.

Mas a√≠ voc√™ pode justificar dizendo que funcion√°rios e clientes precisam
ter estes atributos em comum de qualquer forma. Est√° certo, mas tal necessidade n√£o deve ser resolvida com duplica√ß√£o de c√≥digo.

Se voc√™ est√° duplicando c√≥digo para resolver um problema, saiba que est√° apenas
criando um problema de manuten√ß√£o que pode lhe atormentar futuramente.
Depois de alguns meses quando voc√™ precisar corrigir um desses m√©todos,
possivelmente nem lembrar√° que duplicou o m√©todo em outra classe. Voc√™ vai 
corrigir um e deixar o outro como estava. 

Por fim, voc√™ pode me lembrar que h√° algumas d√©cadas at√© os editores de texto mais simples
possuem um recurso chamado "Localizar". Realmente, inclusive as ferramentas de desenvolvimento
possuem recursos avan√ßados como https://pt.wikipedia.org/wiki/Express√£o_regular[express√µes regulares] 
que nos permitem localizar texto de acordo com um padr√£o que definirmos.
Por√©m, o c√≥digo duplicado pode ter sido alterado de uma forma que voc√™ pode n√£o conseguir localiz√°-lo mais.


Ent√£o, para resolver o problema apresentado acima, vamos aprender os conceitos de heran√ßa em Java neste cap√≠tulo.
Heran√ßa √© provavelmente o conceito mais f√°cil de ser entendido em POO, pois somos familiarizados com tal conceito da biologia e √© algo que faz parte de nossas vidas.

Vamos analisar a √°rvore geneal√≥gica abaixo. Coloque-se como o personsagem na raiz da √°rvore. Voc√™ √© ent√£o filho(a) de um pai e uma m√£e. Dessa forma, voc√™ herda tanto caracter√≠sticas quanto comportamentos de ambos os pais. As caracter√≠sticas s√£o por exemplo a cor da pele, tipo de cabelo e altura. J√° os comportamentos podem ser o humor, sinceridade, legaldade, gentileza, responsabilidade, etc. Apesar de termos uma heran√ßa gen√©tica recebida de ambos os pais, n√£o herdamos todas as caracter√≠sticas e comportamentos dos dois. O que herdamos √© definido seletivamente pela gen√©tica. Assim, recebemos um conjunto de caracter√≠sticas e comportamentos do nosso pai e outro conjunto da nossa m√£e. 

Outro detalhe importante √© que os irm√£os s√£o sempre diferentes de alguma forma, cada um tem uma heran√ßa gen√©tica diferente do outro. Mesmo que existam g√™meos id√™nticos, eles s√£o assim apenas na apar√™ncia, mas n√£o no comportamento. Um irm√£o pode ter habilidades natas como conseguir resolver problemas matem√°ticos que o outro n√£o consegue.

.Uma √°rvore geneal√≥gica convencional (Fonte: http://www.editoradobrasil.com.br:81/blog-da-gabi/arvore-genealogica/[Editora do Brasil]).
image::arvore-genealogica.jpg[]

Na √°rvore geneal√≥gica temos v√°rios n√≠veis de antecessores acima dos pais, como av√≥s maternos e paternos, bisav√≥s maternos e paternos, etc. Por conta desta interliga√ß√£o gen√©tica, n√£o recebemos heran√ßa gen√©tica apenas dos nossos pais, mas de todos os antecessores nos n√≠veis superiores. Claramente, a carga gen√©tica que herdamos dos antecessores de n√≠veis mais elevados √© bem menor que dos nossos pais. Em geral, as pessoas n√£o fazem ideia do que herdaram de seus bisav√≥s, por exemplo.

Os conceitos apresentados acima s√£o aplicados na POO, mas com algumas diferen√ßas.
Tal modelo onde cada filho(a) tem um pai e uma m√£e √© chamado de heran√ßa m√∫ltipla. 
Na POO, a heran√ßa √© aplicada √†s classes. Por√©m, na grande maioria das linguagens orientadas a objetos, uma classe filha s√≥ pode ter m√£e, n√£o tendo pai. Isto √© chamado de heran√ßa simples.

[NOTE]
====
Apesar de existirem recursos como Interfaces e algumas inova√ß√µes nesse sentido no Java 8,
o Java n√£o permite de fato definir que uma classe herde de duas ou mais classes. 
O que temos s√£o alguns recursos parecidos com isso, mas que n√£o s√£o de fato totais implementa√ß√µes
de heran√ßa m√∫ltipla. Isto inclusive √© um assunto controverso e muitas vezes apresentado de forma incorreta em quest√µes de concurso, que com a devida fundamenta√ß√£o te√≥rica, cabe recurso.
====

J√° sabemos que as caracter√≠sticas s√£o atributos e comportamentos/habilidades s√£o os m√©todos de uma classe. 
Isto tudo √© o que uma classe filha pode receber como heran√ßa de uma classe m√£e, av√≥,
bisav√≥ e qualquer outra num n√≠vel superior na √°rvore.

No entanto, diferente da biologia, na POO uma classe filha herda tudo o que cada uma das classes antecessoras decidir fornecer √†s suas descendentes. Isto quer dizer que, uma classe filha e suas irm√£s recebem toda a heran√ßa da classe m√£e, da av√≥, da bisav√≥ e assim por diante. Na biologia isso n√£o funcionaria adequadamente: um descendente seria tanto homem quanto mulher se herdasse tudo tanto do pai quanto da m√£e (e dos outros antecessores) ü§î.

Por outro lado, na POO as classes irm√£s herdar√£o os mesmos atributos e habilidades. N√£o h√° como uma classe irm√£ herdar um atributo ou habilidade que outra irm√£ n√£o herdou. Isto √© poss√≠vel na biologia quando, por exemplo, um irm√£o nasce sem uma das pernas (neste caso por uma anomalia). Consequentemente, tal irm√£o n√£o ter√° a habilidade de correr. Na POO, se uma classe antecessora (m√£e, av√≥, etc) indicar que as classes descententes herdar√£o a habilidade "correr", todas as classes filhas herdar√£o tal habilidade por padr√£o. 

IMPORTANT: N√£o temos anomalias nem seletividade gen√©tica na POO.

Na vida real, mesmo que os irm√£os tenham nascido com as mesmas habilidades, por conta de um acidente, algum deles pode perder uma habilidade como ouvir ou ver. Mas isso n√£o tem nada a ver com heran√ßa. Na POO, algo semelhante pode ocorrer quando uma classe irm√£, depois de declarada (de ter sido escrita pela primeira vez), for alterada para indicar que uma determinada habilidade n√£o funcionar√° mais ou funcionar√° de forma diferente. Por exemplo, podemos indicar que para uma determinada classe irm√£, a habilidade "vis√£o" s√≥ funcionar√° em 50% ou que simplesmente n√£o funcionar√°. J√° outra classe irm√£ ter√° a habilidade como herdada das classes antecessoras. Mas isso √© assunto para outro t√≥pico.

Por fim, uma classe irm√£ pode receber atributos e habilidades que s√£o espec√≠ficas dela, e n√£o herdadas das classes antecessoras. Na biologia, um determinado irm√£o tamb√©m pode adquirir uma habilidade ao longo do tempo, como aprender a tocar um instrumento.

A tabela abaixo apresenta um resumo comparativo entre a heran√ßa na biologia e na POO em Java.

.Compara√ß√£o entre Heran√ßa na Biologia e em Java
|==============================================================
| *Recurso*         | *Heran√ßa na Biologia* | *Heran√ßa em Java* 
| Tipo de Heran√ßa| M√∫ltipla para a maioria dos seres vivos. | Simples para Java e a maioria das linguagens OO.
| O que filhos herdam | Um pouco de cada um dos antecessores (pai e m√£e, av√≥s maternos e paternos, etc). | Tudo o que cada uma das classes antecessoras decidir fornecer √†s descendentes.
| Habilidades/comportamentos herdadas(os) (o que irm√£os t√™m em comum) | √â definido de forma seletiva pela gen√©tica. Mesmo que g√™meos id√™nticos tenham a mesma apar√™ncia, eles t√™m alguns comportamentos diferentes. | Os irm√£os sempre herdar√£o as mesmas caracter√≠sticas (atributos) e comportamentos/habilidades (m√©todos), o que n√£o significa que ter√£o o mesmo conjunto de caracter√≠sticas e habilidades (ver √∫ltima linha da tabela).
| Altera√ß√£o e perda de habilidades/comportamentos | Um determinado irm√£o pode perder ou ter uma habilidade alterada devido a um acidente. | Uma classe irm√£ pode ter uma habilidade alterada intencionalmente pelo desenvolvedor para que funcione de modo diferente ou que se torne completamente n√£o funcional. Neste √∫ltimo caso, a classe ainda ter√° tal habilidade, que nada mais √© que um m√©todo, s√≥ que ele n√£o faz mais nada. 
| Habilidades e comportamentos espec√≠ficos de um irm√£o 2+| Nos dois casos, um irm√£o pode adquirir habilidades que s√£o s√≥ dele, que n√£o foram heran√ßa. |
|==============================================================
